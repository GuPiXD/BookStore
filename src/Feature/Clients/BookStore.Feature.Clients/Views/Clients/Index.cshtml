@model IEnumerable<BookStore.Feature.Clients.Models.IndexViewModel>

@{
  ViewData["Title"] = "Index";
}

<h2>Clients</h2>
@Html.ActionLink("Add", "New", "Clients", new { @class = "btn btn-primary" })
<table id="clients" class="table table-bordered table-hover">
  <thead>
    <tr>
      <th>Client Name</th>
      <th>Job</th>
      <th>Actions</th>
    </tr>
  </thead>
  @foreach (var client in Model)
  {
    <tr>
      <td>@client.FullName</td>
      @{ var jobtitle = (client.Job == null ? "Not specified" : client.Job);
        <td>@jobtitle</td>
      }
      <td>
        @Html.ActionLink("View", "Details", "Clients", new { id = client.Id }, new { @class = "btn btn-primary" })
        @Html.ActionLink("Edit", "Edit", "Clients", new { id = client.Id }, new { @class = "btn btn-primary" })
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#@client.Id">
          Delete
        </button>
        <div class="modal fade" id="@client.Id" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Deleting Client Entry</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                Are you sure you want to delete "@client.FullName" entry?
              </div>
              <div class="modal-footer">

                <form method="post" action="/Clients/Delete">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <input type="hidden" id="Id" name="Id" value=@client.Id>
                  <button type="submit" class="btn btn-primary">Yes</button>
                </form>

              </div>
            </div>
          </div>
        </div>
      </td>
    </tr>
}
</table>
